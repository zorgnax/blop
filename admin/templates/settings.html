[% PROCESS header.html title="Settings" x1="Settings" x2="General" %]

<form id="settings" name="settings" method="post" class="aform">
<input type="hidden" name="csrf" value="[% blop.csrf %]"/>

<h3>Main</h3>

<div class="aentry">
<label for="title">Blog Title</label><br/>
<input id="title" name="title" type="text" value="[% blop.conf.title | html %]"/><span class="title-error aform-error"></span>
</div>

<div class="aentry">
<label for="slogan">Blog Slogan</label><br/>
<input id="slogan" name="slogan" type="text" value="[% blop.conf.slogan | html %]"/><span class="slogan-error aform-error"></span>
</div>

<div class="aentry">
<label for="email">Admin Email</label><br/>
<input id="email" name="email" type="text" value="[% blop.conf.email | html %]"/><span class="email-error aform-error"></span>
</div>

<div class="aentry">
<label for="ppp">Posts Per Page (PPP)</label><br/>
<input id="ppp" name="ppp" type="text" value="[% blop.conf.ppp | html %]"/><span class="ppp-error aform-error"></span>
</div>

<div class="aentry">
<input id="catlatest" name="catlatest" type="checkbox"[% IF blop.conf.cat_latest %] checked="checked"[% END %]/>
<label for="catlatest">Category Listing Pages Show Latest Post</label>
</div>

<div class="aentry">
<label for="timezone">Timezone</label><br/>
<select id="timezone" name="timezone">
[% FOREACH region IN time_zones %]
[% IF !region.region %]
<option value="[% region.zone %]"[% IF region.zone == blop.conf.timezone %] selected="selected"[% END %]>[% region.name %]</option>
[% ELSE %]
<optgroup label="[% region.region %]">
[% FOREACH zone IN region.zones %]
<option value="[% zone.zone %]"[% IF zone.zone == blop.conf.timezone %] selected="selected"[% END %]>[% zone.name %]</option>
[% END %]
</optgroup>
[% END %]
[% END %]
</select>
[% blop.now.str %]
</div>

<h3>Comments</h3>

<div class="aentry">
<input id="postcomments" name="postcomments" type="checkbox"[% IF blop.conf.post_comments %] checked="checked"[% END %]/>
<label for="postcomments">Comments on Posts</label>
</div>

<div class="aentry">
<input id="pagecomments" name="pagecomments" type="checkbox"[% IF blop.conf.page_comments %] checked="checked"[% END %]/>
<label for="pagecomments">Comments on Pages</label>
</div>

<div class="aentry">
<input id="modcomments" name="modcomments" type="checkbox"[% IF blop.conf.mod_comments %] checked="checked"[% END %]/>
<label for="modcomments">Moderate Comments</label>
</div>

<h3>Gallery Default Sizes</h3>

<p class="muted">Thumbnail format uses ImageMagick's geometry argument: <a href="http://www.imagemagick.org/script/command-line-processing.php#geometry" target="_blank">http://www.imagemagick.org/script/command-line-processing.php#geometry</a>.</p>

<div class="aentry">
<label for="gallerysmall">Small Thumbnails</label><br/>
<input id="gallerysmall" name="gallerysmall" type="text" value="[% blop.conf.gallery_small | html %]"/><span class="gallerysmall-error aform-error"></span>
</div>

<div class="aentry">
<label for="gallerymedium">Medium Thumbnails</label><br/>
<input id="gallerymedium" name="gallerymedium" type="text" value="[% blop.conf.gallery_medium | html %]"/><span class="gallerymedium-error aform-error"></span>
</div>

<div class="aentry">
<label for="gallerylarge">Large Thumbnails</label><br/>
<input id="gallerylarge" name="gallerylarge" type="text" value="[% blop.conf.gallery_large | html %]"/><span class="gallerylarge-error aform-error"></span>
</div>

<h3>Search Engine Meta Tags</h3>

<div class="aentry">
<label for="metadesc">Description</label><br/>
<input id="metadesc" name="metadesc" type="text" value="[% blop.conf.meta_description | html %]"/><span class="metadesc-error aform-error"></span>
</div>

<div class="aentry">
<label for="metatags">Keywords <span class="input-info">comma separated</span></label><br/>
<input id="metatags" name="metatags" type="text" value="[% blop.conf.meta_tags | html %]"/><span class="metatags-error aform-error"></span>
</div>

<div class="aentry">
<label for="metaauthor">Author</label><br/>
<input id="metaauthor" name="metaauthor" type="text" value="[% blop.conf.meta_author | html %]"/><span class="metaauthor-error aform-error"></span>
</div>

<h3>Theme Components</h3>

<div class="aentry" id="logo-component">
<label for="logo">Logo</label><br/>
<div class="component-view"[% IF !blop.logo %] style="display:none"[% END %]>
<div class="component-image">
[% IF blop.logo %]<img src="[% blop.logo %]"/>[% END %]
</div>
<a href="#" class="delete-component">delete</a>
</div>
<input id="logo" name="logo" type="file"/>
<a href="#" class="abort" style="display:none">Abort</a><br/>
<div class="bform-error component-mesg"></div>
</div>

<div class="aentry" id="background-component">
<label for="background">Background Image</label><br/>
<div class="component-view"[% IF !blop.background %] style="display:none"[% END %]>
<div class="component-image">
[% IF blop.background %]<ul><li><a href="[% blop.background %]" target="_blank">link</a></li></ul>[% END %]
</div>
<a href="#" class="delete-component">delete</a>
</div>
<input id="background" name="background" type="file"/>
<a href="#" class="abort" style="display:none">Abort</a><br/>
<div class="bform-error component-mesg"></div>
</div>

<div class="aentry">
<label for="extralinks">Extra Page Links <span class="input-info">Format: title url, title url, ...</span></label><br/>
<input id="extralinks" name="extralinks" type="text" value="[% blop.conf.extra_links | html %]"/><span class="extralinks-error aform-error"></span>
</div>

<div class="aentry">
<input type="submit" value="Update Settings"/>
<span class="aform-mesg aform-error"></span>
</div>

</form>

<script type="text/javascript" src="[% urlbase %]/admin/js/aform.js"></script>
<script type="text/javascript" src="[% urlbase %]/admin/js/component.js"></script>
<script type="text/javascript">
var aform = new AForm({
    formId: "#settings",
    processUrl: "[% urlbase %]/admin/settings-js",
    successUrl: "[% urlbase %]/admin/settings-edited"
});

new Component({
    divId: "#logo-component",
    component: "logo",
    csrf: "[% blop.csrf %]",
    processUrl: "[% urlbase %]/admin/component-js",
    deleteUrl: "[% urlbase %]/admin/delete-component-js"
});

new Component({
    divId: "#background-component",
    component: "background",
    csrf: "[% blop.csrf %]",
    processUrl: "[% urlbase %]/admin/component-js",
    deleteUrl: "[% urlbase %]/admin/delete-component-js",
    link: 1
});
</script>

[% PROCESS footer.html %]

